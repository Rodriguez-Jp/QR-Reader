(()=>{let e,t,n,a,o,c,s,d,i=!1,l=document.body.getBoundingClientRect();function r(e){if(e.preventDefault(),e.stopPropagation(),!i)return;let l=parseInt(e.clientX-t),r=parseInt(e.clientY-n);c.clearRect(0,0,canvas.width,canvas.height),s=l-a,d=r-o,c.strokeRect(a,o,s,d)}chrome.runtime.onMessage.addListener((function(u){"scan"===u.action&&function(){if(document.querySelector(".scan-modal"))return;let u=document.createElement("div");u.classList.add("scan-modal");let m=document.createElement("canvas");m.classList.add("scan-rectangle"),m.id="canvas",u.appendChild(m),document.body.appendChild(u);let g=document.getElementById("canvas");c=g.getContext("2d"),c.strokeStyle="green",c.lineWidth=2,e=g.getBoundingClientRect(),g.width=l.width,g.height=l.height,t=e.left,n=e.top,i=!1,document.getElementById("canvas").addEventListener("mousedown",(e=>function(e){e.preventDefault(),e.stopPropagation(),a=parseInt(e.clientX-t),o=parseInt(e.clientY-n),i=!0}(e))),document.getElementById("canvas").addEventListener("mouseup",(e=>async function(e){e.preventDefault(),e.stopPropagation(),console.log("Hola!"),chrome.runtime.sendMessage({action:"position",info:{startX:a,startY:o,width:s,height:d}}),console.log("pase!"),i=!1}(e))),document.getElementById("canvas").addEventListener("mousemove",(e=>r(e)))}()}))})();